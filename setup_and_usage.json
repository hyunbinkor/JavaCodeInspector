{
  "package.json": {
    "name": "pdf-guideline-extractor",
    "version": "1.0.0",
    "description": "PDF 개발가이드에서 JSON 가이드라인을 추출하는 도구",
    "main": "guideline-extractor.js",
    "scripts": {
      "extract": "node guideline-extractor.js",
      "extract-with-llm": "node guideline-extractor.js --use-llm",
      "test": "npm run extract test/sample_guide.pdf test/output.json",
      "install-deps": "npm install pdf-parse axios dotenv commander chalk"
    },
    "dependencies": {
      "pdf-parse": "^1.1.1",
      "axios": "^1.6.0",
      "dotenv": "^16.3.1",
      "commander": "^11.1.0",
      "chalk": "^4.1.2"
    },
    "devDependencies": {
      "jest": "^29.7.0"
    },
    "keywords": ["pdf", "guideline", "code-quality", "java", "extraction"],
    "author": "Development Team",
    "license": "MIT"
  },
  
  "installation_steps": [
    "# 1. 프로젝트 디렉토리 설정",
    "mkdir pdf-guideline-extractor",
    "cd pdf-guideline-extractor",
    "",
    "# 2. package.json 생성 및 의존성 설치", 
    "npm init -y",
    "npm install pdf-parse axios dotenv commander chalk",
    "",
    "# 3. 스크립트 파일들 복사",
    "# - guideline-extractor.js",
    "# - extract-and-apply-guidelines.sh",
    "",
    "# 4. 환경 변수 설정 (.env 파일 생성)",
    "echo 'OPENAI_API_KEY=your_api_key_here' > .env",
    "echo 'LLM_MODEL=gpt-4' >> .env",
    "echo 'LLM_ENDPOINT=https://api.openai.com/v1/chat/completions' >> .env",
    "",
    "# 5. 실행 권한 부여",
    "chmod +x extract-and-apply-guidelines.sh"
  ],

  "usage_examples": {
    "기본_PDF_추출": {
      "command": "node guideline-extractor.js development_guide.pdf extracted_rules.json",
      "description": "PDF에서 기본적인 규칙 추출"
    },
    
    "LLM_고급_추출": {
      "command": "node guideline-extractor.js development_guide.pdf advanced_rules.json --use-llm",
      "description": "LLM을 활용한 고급 규칙 추출",
      "requirements": ["OpenAI API Key", "인터넷 연결"]
    },
    
    "통합_스크립트_사용": {
      "command": "./extract-and-apply-guidelines.sh -p guide.pdf -c MyClass.java --use-llm",
      "description": "PDF 추출부터 코드 분석까지 한번에"
    },
    
    "기존_분석기에_적용": {
      "commands": [
        "# 1. 가이드라인 추출",
        "node guideline-extractor.js guide.pdf custom_rules.json",
        "",
        "# 2. 분석기에 적용", 
        "node main.js manage-guidelines --import custom_rules.json",
        "",
        "# 3. 코드 검사",
        "node main.js check -c MyClass.java --generate-fixes"
      ]
    }
  },

  "llm_integration": {
    "openai_example": {
      "description": "OpenAI API 연동 예시",
      "code": "const { Configuration, OpenAIApi } = require('openai');\n\nclass OpenAIClient {\n  constructor(apiKey) {\n    this.openai = new OpenAIApi(new Configuration({ apiKey }));\n  }\n  \n  async generateCompletion(prompt, options = {}) {\n    const response = await this.openai.createChatCompletion({\n      model: options.model || 'gpt-4',\n      messages: [{ role: 'user', content: prompt }],\n      temperature: options.temperature || 0.1,\n      max_tokens: options.max_tokens || 2000\n    });\n    \n    return response.data.choices[0].message.content;\n  }\n}"
    },
    
    "anthropic_example": {
      "description": "Anthropic Claude API 연동 예시",
      "code": "const axios = require('axios');\n\nclass AnthropicClient {\n  constructor(apiKey) {\n    this.apiKey = apiKey;\n    this.baseURL = 'https://api.anthropic.com/v1';\n  }\n  \n  async generateCompletion(prompt, options = {}) {\n    const response = await axios.post(\n      `${this.baseURL}/messages`,\n      {\n        model: options.model || 'claude-3-sonnet-20240229',\n        max_tokens: options.max_tokens || 2000,\n        messages: [{ role: 'user', content: prompt }]\n      },\n      {\n        headers: {\n          'x-api-key': this.apiKey,\n          'anthropic-version': '2023-06-01',\n          'content-type': 'application/json'\n        }\n      }\n    );\n    \n    return response.data.content[0].text;\n  }\n}"
    },
    
    "local_llm_example": {
      "description": "로컬 LLM (Ollama 등) 연동 예시",
      "code": "class LocalLLMClient {\n  constructor(endpoint = 'http://localhost:11434') {\n    this.endpoint = endpoint;\n  }\n  \n  async generateCompletion(prompt, options = {}) {\n    const response = await axios.post(\n      `${this.endpoint}/api/generate`,\n      {\n        model: options.model || 'codellama',\n        prompt: prompt,\n        stream: false,\n        options: {\n          temperature: options.temperature || 0.1,\n          num_predict: options.num_predict || 1000\n        }\n      }\n    );\n    \n    return response.data.response;\n  }\n}"
    }
  },

  "configuration": {
    "environment_variables": {
      "OPENAI_API_KEY": "OpenAI API 키",
      "ANTHROPIC_API_KEY": "Anthropic API 키", 
      "LLM_PROVIDER": "사용할 LLM 제공자 (openai|anthropic|local)",
      "LLM_MODEL": "사용할 모델명",
      "LLM_ENDPOINT": "커스텀 엔드포인트 URL",
      "EXTRACTION_MODE": "추출 모드 (basic|advanced|hybrid)",
      "LOG_LEVEL": "로그 레벨 (error|warn|info|debug)"
    },
    
    "config_file_example": {
      "filename": "extractor.config.json",
      "content": {
        "llm": {
          "provider": "openai",
          "model": "gpt-4",
          "temperature": 0.1,
          "max_tokens": 2000,
          "timeout": 30000
        },
        "extraction": {
          "categories": [
            "naming_convention",
            "formatting", 
            "code_style",
            "documentation",
            "exception_handling",
            "framework_specific"
          ],
          "severity_mapping": {
            "critical_keywords": ["보안", "성능", "메모리"],
            "high_keywords": ["필수", "반드시", "금지"],
            "medium_keywords": ["권장", "가급적", "피해야"],
            "low_keywords": ["스타일", "형식", "포맷"]
          }
        },
        "output": {
          "format": "json",
          "indent": 2,
          "include_metadata": true,
          "backup_existing": true
        }
      }
    }
  },

  "troubleshooting": {
    "common_issues": [
      {
        "issue": "PDF 파싱 실패",
        "cause": "손상된 PDF 또는 보안 설정",
        "solution": "PDF 파일 재생성 또는 보안 설정 해제"
      },
      {
        "issue": "LLM API 호출 실패",
        "cause": "API 키 누락 또는 네트워크 오류",
        "solution": ".env 파일의 API 키 확인 및 네트워크 상태 점검"
      },
      {
        "issue": "추출된 규칙이 부정확함",
        "cause": "PDF 텍스트 구조 인식 오류",
        "solution": "LLM 모드 사용 또는 수동 보정"
      },
      {
        "issue": "메모리 부족 오류",
        "cause": "대용량 PDF 처리",
        "solution": "Node.js 메모리 한계 증가: node --max-old-space-size=4096"
      }
    ]
  },

  "quality_validation": {
    "validation_rules": [
      "추출된 각 규칙은 고유한 ruleId를 가져야 함",
      "모든 규칙은 필수 필드(title, category, checkType, severity)를 포함해야 함",
      "examples 필드는 good과 bad 예시를 모두 포함해야 함", 
      "severity는 정의된 값(LOW|MEDIUM|HIGH|CRITICAL) 중 하나여야 함",
      "checkType은 구현 가능한 타입(regex|ast|llm_contextual) 중 하나여야 함"
    ],
    
    "validation_script": "node -e \"const rules = require('./extracted_rules.json'); rules.forEach((rule, i) => { if (!rule.ruleId || !rule.title) console.log(\`Rule ${i}: Missing required fields\`); });\""
  }
}